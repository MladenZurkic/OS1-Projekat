GAS LISTING /tmp/ccs6pYwa.s 			page 1


   1              		.file	"riscv.cpp"
   2              		.option pic
   3              		.option norelax
   4              		.text
   5              	.Ltext0:
   6              		.align	2
   7              		.globl	_ZN5Riscv10popSppSpieEv
   9              	_ZN5Riscv10popSppSpieEv:
  10              	.LFB52:
  11              		.file 1 "src/riscv.cpp"
   1:src/riscv.cpp **** //
   2:src/riscv.cpp **** // Created by marko on 20.4.22..
   3:src/riscv.cpp **** //
   4:src/riscv.cpp **** 
   5:src/riscv.cpp **** #include "../h/riscv.hpp"
   6:src/riscv.cpp **** #include "../h/tcb.hpp"
   7:src/riscv.cpp **** #include "../lib/console.h"
   8:src/riscv.cpp **** #include "../h/print.hpp"
   9:src/riscv.cpp **** #include "../h/syscall_c.hpp"
  10:src/riscv.cpp **** 
  11:src/riscv.cpp **** void Riscv::popSppSpie()
  12:src/riscv.cpp **** {
  12              		.loc 1 12 1
  13              		.cfi_startproc
  14 0000 130101FF 		addi	sp,sp,-16
  15              		.cfi_def_cfa_offset 16
  16 0004 23348100 		sd	s0,8(sp)
  17              		.cfi_offset 8, -8
  18 0008 13040101 		addi	s0,sp,16
  19              		.cfi_def_cfa 8, 0
  13:src/riscv.cpp ****     __asm__ volatile("csrw sepc, ra");
  20              		.loc 1 13 5
  21              		.loc 1 13 38 is_stmt 0
  22              	#APP
  23              	# 13 "src/riscv.cpp" 1
  14              	    __asm__ volatile("sret");
  24              		csrw sepc, ra
  25              	# 0 "" 2
  26              		.loc 1 14 5 is_stmt 1
  27              		.loc 1 14 29 is_stmt 0
  28              	# 14 "src/riscv.cpp" 1
  15              	}
  29              		sret
  30              	# 0 "" 2
  31              		.loc 1 15 1
  32              	#NO_APP
  33 0014 03348100 		ld	s0,8(sp)
  34              		.cfi_restore 8
  35              		.cfi_def_cfa 2, 16
  36 0018 13010101 		addi	sp,sp,16
  37              		.cfi_def_cfa_offset 0
  38 001c 67800000 		jr	ra
  39              		.cfi_endproc
  40              	.LFE52:
  42              		.align	2
  43              		.globl	_ZN5Riscv20handleSupervisorTrapEv
  45              	_ZN5Riscv20handleSupervisorTrapEv:
GAS LISTING /tmp/ccs6pYwa.s 			page 2


  46              	.LFB53:
  16:src/riscv.cpp **** 
  17:src/riscv.cpp **** using Body = void (*)(void*);
  18:src/riscv.cpp **** 
  19:src/riscv.cpp **** void Riscv::handleSupervisorTrap()
  20:src/riscv.cpp **** {
  47              		.loc 1 20 1 is_stmt 1
  48              		.cfi_startproc
  49 0020 130101FB 		addi	sp,sp,-80
  50              		.cfi_def_cfa_offset 80
  51 0024 23341104 		sd	ra,72(sp)
  52 0028 23308104 		sd	s0,64(sp)
  53 002c 233C9102 		sd	s1,56(sp)
  54              		.cfi_offset 1, -8
  55              		.cfi_offset 8, -16
  56              		.cfi_offset 9, -24
  57 0030 13040105 		addi	s0,sp,80
  58              		.cfi_def_cfa 8, 0
  21:src/riscv.cpp ****     uint64 scause = r_scause();
  59              		.loc 1 21 5
  60              	.LBB20:
  61              	.LBB21:
  62              		.file 2 "src/../h/riscv.hpp"
   1:src/../h/riscv.hpp **** //
   2:src/../h/riscv.hpp **** // Created by marko on 20.4.22..
   3:src/../h/riscv.hpp **** //
   4:src/../h/riscv.hpp **** 
   5:src/../h/riscv.hpp **** #ifndef OS1_VEZBE07_RISCV_CONTEXT_SWITCH_2_INTERRUPT_RISCV_HPP
   6:src/../h/riscv.hpp **** #define OS1_VEZBE07_RISCV_CONTEXT_SWITCH_2_INTERRUPT_RISCV_HPP
   7:src/../h/riscv.hpp **** 
   8:src/../h/riscv.hpp **** #include "../lib/hw.h"
   9:src/../h/riscv.hpp **** 
  10:src/../h/riscv.hpp **** class Riscv
  11:src/../h/riscv.hpp **** {
  12:src/../h/riscv.hpp **** public:
  13:src/../h/riscv.hpp **** 
  14:src/../h/riscv.hpp ****     // pop sstatus.spp and sstatus.spie bits (has to be a non inline function)
  15:src/../h/riscv.hpp ****     static void popSppSpie();
  16:src/../h/riscv.hpp **** 
  17:src/../h/riscv.hpp ****     // read register scause
  18:src/../h/riscv.hpp ****     static uint64 r_scause();
  19:src/../h/riscv.hpp **** 
  20:src/../h/riscv.hpp ****     // write register scause
  21:src/../h/riscv.hpp ****     static void w_scause(uint64 scause);
  22:src/../h/riscv.hpp **** 
  23:src/../h/riscv.hpp ****     // read register sepc
  24:src/../h/riscv.hpp ****     static uint64 r_sepc();
  25:src/../h/riscv.hpp **** 
  26:src/../h/riscv.hpp ****     // write register sepc
  27:src/../h/riscv.hpp ****     static void w_sepc(uint64 sepc);
  28:src/../h/riscv.hpp **** 
  29:src/../h/riscv.hpp ****     // read register stvec
  30:src/../h/riscv.hpp ****     static uint64 r_stvec();
  31:src/../h/riscv.hpp **** 
  32:src/../h/riscv.hpp ****     // write register stvec
  33:src/../h/riscv.hpp ****     static void w_stvec(uint64 stvec);
  34:src/../h/riscv.hpp **** 
GAS LISTING /tmp/ccs6pYwa.s 			page 3


  35:src/../h/riscv.hpp ****     // read register stval
  36:src/../h/riscv.hpp ****     static uint64 r_stval();
  37:src/../h/riscv.hpp **** 
  38:src/../h/riscv.hpp ****     // write register stval
  39:src/../h/riscv.hpp ****     static void w_stval(uint64 stval);
  40:src/../h/riscv.hpp **** 
  41:src/../h/riscv.hpp ****     enum BitMaskSip
  42:src/../h/riscv.hpp ****     {
  43:src/../h/riscv.hpp ****         SIP_SSIP = (1 << 1),
  44:src/../h/riscv.hpp ****         SIP_STIP = (1 << 5),
  45:src/../h/riscv.hpp ****         SIP_SEIP = (1 << 9),
  46:src/../h/riscv.hpp ****     };
  47:src/../h/riscv.hpp **** 
  48:src/../h/riscv.hpp ****     // mask set register sip
  49:src/../h/riscv.hpp ****     static void ms_sip(uint64 mask);
  50:src/../h/riscv.hpp **** 
  51:src/../h/riscv.hpp ****     // mask clear register sip
  52:src/../h/riscv.hpp ****     static void mc_sip(uint64 mask);
  53:src/../h/riscv.hpp **** 
  54:src/../h/riscv.hpp ****     // read register sip
  55:src/../h/riscv.hpp ****     static uint64 r_sip();
  56:src/../h/riscv.hpp **** 
  57:src/../h/riscv.hpp ****     // write register sip
  58:src/../h/riscv.hpp ****     static void w_sip(uint64 sip);
  59:src/../h/riscv.hpp **** 
  60:src/../h/riscv.hpp ****     enum BitMaskSstatus
  61:src/../h/riscv.hpp ****     {
  62:src/../h/riscv.hpp ****         SSTATUS_SIE = (1 << 1),
  63:src/../h/riscv.hpp ****         SSTATUS_SPIE = (1 << 5),
  64:src/../h/riscv.hpp ****         SSTATUS_SPP = (1 << 8),
  65:src/../h/riscv.hpp ****     };
  66:src/../h/riscv.hpp **** 
  67:src/../h/riscv.hpp ****     // mask set register sstatus
  68:src/../h/riscv.hpp ****     static void ms_sstatus(uint64 mask);
  69:src/../h/riscv.hpp **** 
  70:src/../h/riscv.hpp ****     // mask clear register sstatus
  71:src/../h/riscv.hpp ****     static void mc_sstatus(uint64 mask);
  72:src/../h/riscv.hpp **** 
  73:src/../h/riscv.hpp ****     // read register sstatus
  74:src/../h/riscv.hpp ****     static uint64 r_sstatus();
  75:src/../h/riscv.hpp **** 
  76:src/../h/riscv.hpp ****     // write register sstatus
  77:src/../h/riscv.hpp ****     static void w_sstatus(uint64 sstatus);
  78:src/../h/riscv.hpp **** 
  79:src/../h/riscv.hpp ****     // supervisor trap
  80:src/../h/riscv.hpp ****     static void supervisorTrap();
  81:src/../h/riscv.hpp **** 
  82:src/../h/riscv.hpp ****     //stvec Vector "table"
  83:src/../h/riscv.hpp ****     static void stvecVectorTable();
  84:src/../h/riscv.hpp **** 
  85:src/../h/riscv.hpp ****     //read a0 register
  86:src/../h/riscv.hpp ****     static uint64 r_a0();
  87:src/../h/riscv.hpp **** 
  88:src/../h/riscv.hpp ****     //write to a0 register
  89:src/../h/riscv.hpp ****     static void w_a0(uint64 writeValue);
  90:src/../h/riscv.hpp **** 
  91:src/../h/riscv.hpp ****     //read a1 register
GAS LISTING /tmp/ccs6pYwa.s 			page 4


  92:src/../h/riscv.hpp ****     static uint64 r_a1();
  93:src/../h/riscv.hpp **** 
  94:src/../h/riscv.hpp ****     //write to a1 register
  95:src/../h/riscv.hpp ****     static void w_a1(uint64 writeValue);
  96:src/../h/riscv.hpp **** 
  97:src/../h/riscv.hpp ****     //read a2 register
  98:src/../h/riscv.hpp ****     static uint64 r_a2();
  99:src/../h/riscv.hpp **** 
 100:src/../h/riscv.hpp ****     //write to a2 register
 101:src/../h/riscv.hpp ****     static void w_a2(uint64 writeValue);
 102:src/../h/riscv.hpp **** 
 103:src/../h/riscv.hpp ****     //read a3 register
 104:src/../h/riscv.hpp ****     static uint64 r_a3();
 105:src/../h/riscv.hpp **** 
 106:src/../h/riscv.hpp ****     //write to a3 register
 107:src/../h/riscv.hpp ****     static void w_a3(uint64 writeValue);
 108:src/../h/riscv.hpp **** 
 109:src/../h/riscv.hpp ****     //read a4 register
 110:src/../h/riscv.hpp ****     static uint64 r_a4();
 111:src/../h/riscv.hpp **** 
 112:src/../h/riscv.hpp ****     //write to a4 register
 113:src/../h/riscv.hpp ****     static void w_a4(uint64 writeValue);
 114:src/../h/riscv.hpp **** 
 115:src/../h/riscv.hpp ****     //read a5 register
 116:src/../h/riscv.hpp ****     static uint64 r_a5();
 117:src/../h/riscv.hpp **** 
 118:src/../h/riscv.hpp ****     //write to a5 register
 119:src/../h/riscv.hpp ****     static void w_a5(uint64 writeValue);
 120:src/../h/riscv.hpp **** 
 121:src/../h/riscv.hpp ****     //read a6 register
 122:src/../h/riscv.hpp ****     static uint64 r_a6();
 123:src/../h/riscv.hpp **** 
 124:src/../h/riscv.hpp ****     //write to a6 register
 125:src/../h/riscv.hpp ****     static void w_a6(uint64 writeValue);
 126:src/../h/riscv.hpp **** 
 127:src/../h/riscv.hpp ****     //read a7 register
 128:src/../h/riscv.hpp ****     static uint64 r_a7();
 129:src/../h/riscv.hpp **** 
 130:src/../h/riscv.hpp ****     //write to a7 register
 131:src/../h/riscv.hpp ****     static void w_a7(uint64 writeValue);
 132:src/../h/riscv.hpp **** 
 133:src/../h/riscv.hpp **** 
 134:src/../h/riscv.hpp **** private:
 135:src/../h/riscv.hpp **** 
 136:src/../h/riscv.hpp ****     // supervisor trap handler
 137:src/../h/riscv.hpp ****     static void handleSupervisorTrap();
 138:src/../h/riscv.hpp **** 
 139:src/../h/riscv.hpp ****     static void handleTimerInterrupt();
 140:src/../h/riscv.hpp **** 
 141:src/../h/riscv.hpp ****     static void handleConsoleInterrupt();
 142:src/../h/riscv.hpp **** };
 143:src/../h/riscv.hpp **** 
 144:src/../h/riscv.hpp **** 
 145:src/../h/riscv.hpp **** inline uint64 Riscv::r_scause()
 146:src/../h/riscv.hpp **** {
 147:src/../h/riscv.hpp ****     uint64 volatile scause;
  63              		.loc 2 147 5
GAS LISTING /tmp/ccs6pYwa.s 			page 5


 148:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[scause], scause" : [scause] "=r"(scause));
  64              		.loc 2 148 5
  65              		.loc 2 148 72 is_stmt 0
  66              	#APP
  67              	# 148 "src/../h/riscv.hpp" 1
 149              	    return scause;
  68              		csrr a5, scause
  69              	# 0 "" 2
  70              	#NO_APP
  71 0038 2330F4FC 		sd	a5,-64(s0)
  72              		.loc 2 149 5 is_stmt 1
  73              		.loc 2 149 12 is_stmt 0
  74 003c 833704FC 		ld	a5,-64(s0)
  75              	.LVL0:
  76              	.LBE21:
  77              	.LBE20:
  22:src/riscv.cpp ****     if (scause == 0x0000000000000008UL || scause == 0x0000000000000009UL)
  78              		.loc 1 22 5 is_stmt 1
  79              	.LBB22:
  80              		.loc 1 22 40 is_stmt 0
  81 0040 938787FF 		addi	a5,a5,-8
  82              	.LVL1:
  83              		.loc 1 22 5
  84 0044 13071000 		li	a4,1
  85 0048 637CF700 		bleu	a5,a4,.L9
  86              	.LVL2:
  87              	.L3:
  88              	.LBE22:
  23:src/riscv.cpp ****     {
  24:src/riscv.cpp ****         // interrupt: no; cause code: environment call from U-mode(8) or S-mode(9)
  25:src/riscv.cpp ****         uint64 volatile sepc = r_sepc() + 4;
  26:src/riscv.cpp ****         uint64 volatile sstatus = r_sstatus();
  27:src/riscv.cpp **** 
  28:src/riscv.cpp ****         uint64 codeOperation = Riscv::r_a0();
  29:src/riscv.cpp ****         switch (codeOperation) {
  30:src/riscv.cpp ****             case 0x01:
  31:src/riscv.cpp ****                 //mem_alloc
  32:src/riscv.cpp ****                 break;
  33:src/riscv.cpp **** 
  34:src/riscv.cpp ****             case 0x02:
  35:src/riscv.cpp ****                 //mem_free -> a1: ono sta se brise prima
  36:src/riscv.cpp ****                 //Vraca 0 u slucaju uspeha, negativno u slucaju greske
  37:src/riscv.cpp ****                 break;
  38:src/riscv.cpp **** 
  39:src/riscv.cpp ****             case 0x11:
  40:src/riscv.cpp ****                 //thread_create
  41:src/riscv.cpp ****                 //a1: handle - rucka niti - TCB TIP
  42:src/riscv.cpp ****                 //a2: start_routine - ono sto ce nit izvrsavati - Body TIP VEROVATNO?
  43:src/riscv.cpp ****                 //a3: arg - argument za start_routine
  44:src/riscv.cpp ****                 //Uspeh: u handle upisuje rucku i vraca 0, suprotno negativno
  45:src/riscv.cpp **** 
  46:src/riscv.cpp ****                 TCB** tcb;
  47:src/riscv.cpp ****                 Body body;
  48:src/riscv.cpp ****                 void* arg;
  49:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a1" : "=r" (tcb));
  50:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a2" : "=r" (body));
  51:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a3" : "=r" (arg));
GAS LISTING /tmp/ccs6pYwa.s 			page 6


  52:src/riscv.cpp ****                 *tcb = TCB::createThread(body, arg);
  53:src/riscv.cpp ****                 break;
  54:src/riscv.cpp **** 
  55:src/riscv.cpp ****             case 0x12:
  56:src/riscv.cpp ****                 //thread_exit()
  57:src/riscv.cpp ****                 //Gasi tekucu nit samo, znaci treba i dispatch da se uradi
  58:src/riscv.cpp ****                 //0 ili -1 return
  59:src/riscv.cpp ****                 break;
  60:src/riscv.cpp **** 
  61:src/riscv.cpp ****             case 0x13:      //thread_dispatch()
  62:src/riscv.cpp ****                 //Poziva se thread dispatch
  63:src/riscv.cpp ****                 TCB::dispatch();
  64:src/riscv.cpp ****                 break;
  65:src/riscv.cpp **** 
  66:src/riscv.cpp ****             case 0x14:
  67:src/riscv.cpp ****                 thread_t handle;
  68:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a1" : "=r" (handle));
  69:src/riscv.cpp ****                 TCB::join(handle);
  70:src/riscv.cpp ****                 break;
  71:src/riscv.cpp **** 
  72:src/riscv.cpp ****             case 0x21:
  73:src/riscv.cpp ****                 //sem_open
  74:src/riscv.cpp ****                 //check document
  75:src/riscv.cpp ****                 break;
  76:src/riscv.cpp **** 
  77:src/riscv.cpp ****             case 0x22:
  78:src/riscv.cpp ****                 //sem_close
  79:src/riscv.cpp ****                 //check document
  80:src/riscv.cpp ****                 break;
  81:src/riscv.cpp **** 
  82:src/riscv.cpp ****             case 0x23:
  83:src/riscv.cpp ****                 //sem_wait
  84:src/riscv.cpp ****                 //check document
  85:src/riscv.cpp ****                 break;
  86:src/riscv.cpp ****             case 0x24:
  87:src/riscv.cpp ****                 //sem_signal
  88:src/riscv.cpp ****                 break;
  89:src/riscv.cpp **** 
  90:src/riscv.cpp ****             case 0x31:
  91:src/riscv.cpp ****                 //time_sleep
  92:src/riscv.cpp ****                 break;
  93:src/riscv.cpp **** 
  94:src/riscv.cpp ****             case 0x41:
  95:src/riscv.cpp ****                 //getc
  96:src/riscv.cpp ****                 break;
  97:src/riscv.cpp **** 
  98:src/riscv.cpp ****             case 0x42:
  99:src/riscv.cpp ****                 //putc
 100:src/riscv.cpp ****                 break;
 101:src/riscv.cpp ****             //Da li treba 0x41 i 0x42 ako se ne radi asinhrono? izgleda ne
 102:src/riscv.cpp ****         }
 103:src/riscv.cpp **** 
 104:src/riscv.cpp ****         w_sstatus(sstatus);
 105:src/riscv.cpp ****         w_sepc(sepc);
 106:src/riscv.cpp ****     }
 107:src/riscv.cpp ****     else
 108:src/riscv.cpp ****     {
GAS LISTING /tmp/ccs6pYwa.s 			page 7


 109:src/riscv.cpp ****         // unexpected trap cause
 110:src/riscv.cpp ****         // Ovde se ulazi ako se desi neki interrupt tabele
 111:src/riscv.cpp ****     }
 112:src/riscv.cpp **** }
  89              		.loc 1 112 1
  90 004c 83308104 		ld	ra,72(sp)
  91              		.cfi_remember_state
  92              		.cfi_restore 1
  93 0050 03340104 		ld	s0,64(sp)
  94              		.cfi_restore 8
  95              		.cfi_def_cfa 2, 80
  96 0054 83348103 		ld	s1,56(sp)
  97              		.cfi_restore 9
  98 0058 13010105 		addi	sp,sp,80
  99              		.cfi_def_cfa_offset 0
 100 005c 67800000 		jr	ra
 101              	.LVL3:
 102              	.L9:
 103              		.cfi_restore_state
 104              	.LBB38:
 105              	.LBB23:
  25:src/riscv.cpp ****         uint64 volatile sstatus = r_sstatus();
 106              		.loc 1 25 9 is_stmt 1
 107              	.LBB24:
 108              	.LBB25:
 150:src/../h/riscv.hpp **** }
 151:src/../h/riscv.hpp **** 
 152:src/../h/riscv.hpp **** inline void Riscv::w_scause(uint64 scause)
 153:src/../h/riscv.hpp **** {
 154:src/../h/riscv.hpp ****     __asm__ volatile ("csrw scause, %[scause]" : : [scause] "r"(scause));
 155:src/../h/riscv.hpp **** }
 156:src/../h/riscv.hpp **** 
 157:src/../h/riscv.hpp **** inline uint64 Riscv::r_sepc()
 158:src/../h/riscv.hpp **** {
 159:src/../h/riscv.hpp ****     uint64 volatile sepc;
 109              		.loc 2 159 5
 160:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[sepc], sepc" : [sepc] "=r"(sepc));
 110              		.loc 2 160 5
 111              		.loc 2 160 64 is_stmt 0
 112              	#APP
 113              	# 160 "src/../h/riscv.hpp" 1
 161              	    return sepc;
 114              		csrr a5, sepc
 115              	# 0 "" 2
 116              	.LVL4:
 117              	#NO_APP
 118 0064 233CF4FC 		sd	a5,-40(s0)
 119              		.loc 2 161 5 is_stmt 1
 120              		.loc 2 161 12 is_stmt 0
 121 0068 833784FD 		ld	a5,-40(s0)
 122              	.LBE25:
 123              	.LBE24:
  25:src/riscv.cpp ****         uint64 volatile sstatus = r_sstatus();
 124              		.loc 1 25 41
 125 006c 93874700 		addi	a5,a5,4
  25:src/riscv.cpp ****         uint64 volatile sstatus = r_sstatus();
 126              		.loc 1 25 43
GAS LISTING /tmp/ccs6pYwa.s 			page 8


 127 0070 2338F4FA 		sd	a5,-80(s0)
  26:src/riscv.cpp **** 
 128              		.loc 1 26 9 is_stmt 1
 129              	.LBB26:
 130              	.LBB27:
 162:src/../h/riscv.hpp **** }
 163:src/../h/riscv.hpp **** 
 164:src/../h/riscv.hpp **** inline void Riscv::w_sepc(uint64 sepc)
 165:src/../h/riscv.hpp **** {
 166:src/../h/riscv.hpp ****     __asm__ volatile ("csrw sepc, %[sepc]" : : [sepc] "r"(sepc));
 167:src/../h/riscv.hpp **** }
 168:src/../h/riscv.hpp **** 
 169:src/../h/riscv.hpp **** inline uint64 Riscv::r_stvec()
 170:src/../h/riscv.hpp **** {
 171:src/../h/riscv.hpp ****     uint64 volatile stvec;
 172:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[stvec], stvec" : [stvec] "=r"(stvec));
 173:src/../h/riscv.hpp ****     return stvec;
 174:src/../h/riscv.hpp **** }
 175:src/../h/riscv.hpp **** 
 176:src/../h/riscv.hpp **** inline void Riscv::w_stvec(uint64 stvec)
 177:src/../h/riscv.hpp **** {
 178:src/../h/riscv.hpp ****     __asm__ volatile ("csrw stvec, %[stvec]" : : [stvec] "r"(stvec));
 179:src/../h/riscv.hpp **** }
 180:src/../h/riscv.hpp **** 
 181:src/../h/riscv.hpp **** inline uint64 Riscv::r_stval()
 182:src/../h/riscv.hpp **** {
 183:src/../h/riscv.hpp ****     uint64 volatile stval;
 184:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[stval], stval" : [stval] "=r"(stval));
 185:src/../h/riscv.hpp ****     return stval;
 186:src/../h/riscv.hpp **** }
 187:src/../h/riscv.hpp **** 
 188:src/../h/riscv.hpp **** inline void Riscv::w_stval(uint64 stval)
 189:src/../h/riscv.hpp **** {
 190:src/../h/riscv.hpp ****     __asm__ volatile ("csrw stval, %[stval]" : : [stval] "r"(stval));
 191:src/../h/riscv.hpp **** }
 192:src/../h/riscv.hpp **** 
 193:src/../h/riscv.hpp **** inline void Riscv::ms_sip(uint64 mask)
 194:src/../h/riscv.hpp **** {
 195:src/../h/riscv.hpp ****     __asm__ volatile ("csrs sip, %[mask]" : : [mask] "r"(mask));
 196:src/../h/riscv.hpp **** }
 197:src/../h/riscv.hpp **** 
 198:src/../h/riscv.hpp **** inline void Riscv::mc_sip(uint64 mask)
 199:src/../h/riscv.hpp **** {
 200:src/../h/riscv.hpp ****     __asm__ volatile ("csrc sip, %[mask]" : : [mask] "r"(mask));
 201:src/../h/riscv.hpp **** }
 202:src/../h/riscv.hpp **** 
 203:src/../h/riscv.hpp **** inline uint64 Riscv::r_sip()
 204:src/../h/riscv.hpp **** {
 205:src/../h/riscv.hpp ****     uint64 volatile sip;
 206:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[sip], sip" : [sip] "=r"(sip));
 207:src/../h/riscv.hpp ****     return sip;
 208:src/../h/riscv.hpp **** }
 209:src/../h/riscv.hpp **** 
 210:src/../h/riscv.hpp **** inline void Riscv::w_sip(uint64 sip)
 211:src/../h/riscv.hpp **** {
 212:src/../h/riscv.hpp ****     __asm__ volatile ("csrw sip, %[sip]" : : [sip] "r"(sip));
 213:src/../h/riscv.hpp **** }
GAS LISTING /tmp/ccs6pYwa.s 			page 9


 214:src/../h/riscv.hpp **** 
 215:src/../h/riscv.hpp **** inline void Riscv::ms_sstatus(uint64 mask)
 216:src/../h/riscv.hpp **** {
 217:src/../h/riscv.hpp ****     __asm__ volatile ("csrs sstatus, %[mask]" : : [mask] "r"(mask));
 218:src/../h/riscv.hpp **** }
 219:src/../h/riscv.hpp **** 
 220:src/../h/riscv.hpp **** inline void Riscv::mc_sstatus(uint64 mask)
 221:src/../h/riscv.hpp **** {
 222:src/../h/riscv.hpp ****     __asm__ volatile ("csrc sstatus, %[mask]" : : [mask] "r"(mask));
 223:src/../h/riscv.hpp **** }
 224:src/../h/riscv.hpp **** 
 225:src/../h/riscv.hpp **** inline uint64 Riscv::r_sstatus()
 226:src/../h/riscv.hpp **** {
 227:src/../h/riscv.hpp ****     uint64 volatile sstatus;
 131              		.loc 2 227 5
 228:src/../h/riscv.hpp ****     __asm__ volatile ("csrr %[sstatus], sstatus" : [sstatus] "=r"(sstatus));
 132              		.loc 2 228 5
 133              		.loc 2 228 76 is_stmt 0
 134              	#APP
 135              	# 228 "src/../h/riscv.hpp" 1
 229              	    return sstatus;
 136              		csrr a5, sstatus
 137              	# 0 "" 2
 138              	#NO_APP
 139 0078 2338F4FC 		sd	a5,-48(s0)
 140              		.loc 2 229 5 is_stmt 1
 141              		.loc 2 229 12 is_stmt 0
 142 007c 833704FD 		ld	a5,-48(s0)
 143              	.LBE27:
 144              	.LBE26:
  26:src/riscv.cpp **** 
 145              		.loc 1 26 45
 146 0080 233CF4FA 		sd	a5,-72(s0)
  28:src/riscv.cpp ****         switch (codeOperation) {
 147              		.loc 1 28 9 is_stmt 1
 148              	.LBB28:
 149              	.LBB29:
 230:src/../h/riscv.hpp **** }
 231:src/../h/riscv.hpp **** 
 232:src/../h/riscv.hpp **** inline void Riscv::w_sstatus(uint64 sstatus)
 233:src/../h/riscv.hpp **** {
 234:src/../h/riscv.hpp ****     __asm__ volatile ("csrw sstatus, %[sstatus]" : : [sstatus] "r"(sstatus));
 235:src/../h/riscv.hpp **** }
 236:src/../h/riscv.hpp **** 
 237:src/../h/riscv.hpp **** //a0
 238:src/../h/riscv.hpp **** inline uint64 Riscv::r_a0()
 239:src/../h/riscv.hpp **** {
 240:src/../h/riscv.hpp ****     uint64 volatile a0;
 150              		.loc 2 240 5
 241:src/../h/riscv.hpp ****     __asm__ volatile ("mv %0, a0" : "=r"(a0));
 151              		.loc 2 241 5
 152              		.loc 2 241 46 is_stmt 0
 153              	#APP
 154              	# 241 "src/../h/riscv.hpp" 1
 242              	    return a0;
 155              		mv a5, a0
 156              	# 0 "" 2
GAS LISTING /tmp/ccs6pYwa.s 			page 10


 157              	#NO_APP
 158 0088 2334F4FC 		sd	a5,-56(s0)
 159              		.loc 2 242 5 is_stmt 1
 160              		.loc 2 242 12 is_stmt 0
 161 008c 833784FC 		ld	a5,-56(s0)
 162              	.LVL5:
 163              	.LBE29:
 164              	.LBE28:
  29:src/riscv.cpp ****             case 0x01:
 165              		.loc 1 29 9 is_stmt 1
 166              	.LBB30:
 167 0090 13073001 		li	a4,19
 168 0094 6382E704 		beq	a5,a4,.L5
 169 0098 13074001 		li	a4,20
 170 009c 6384E704 		beq	a5,a4,.L6
 171 00a0 13071001 		li	a4,17
 172 00a4 638CE700 		beq	a5,a4,.L10
 173              	.LVL6:
 174              	.L7:
 175              	.LBE30:
 104:src/riscv.cpp ****         w_sepc(sepc);
 176              		.loc 1 104 9
 104:src/riscv.cpp ****         w_sepc(sepc);
 177              		.loc 1 104 18 is_stmt 0
 178 00a8 833784FB 		ld	a5,-72(s0)
 179              	.LVL7:
 180              	.LBB32:
 181              	.LBB33:
 234:src/../h/riscv.hpp **** }
 182              		.loc 2 234 5 is_stmt 1
 234:src/../h/riscv.hpp **** }
 183              		.loc 2 234 77 is_stmt 0
 184              	#APP
 185              	# 234 "src/../h/riscv.hpp" 1
 186              		csrw sstatus, a5
 187              	# 0 "" 2
 188              	.LVL8:
 189              	#NO_APP
 190              	.LBE33:
 191              	.LBE32:
 105:src/riscv.cpp ****     }
 192              		.loc 1 105 9 is_stmt 1
 105:src/riscv.cpp ****     }
 193              		.loc 1 105 15 is_stmt 0
 194 00b0 833704FB 		ld	a5,-80(s0)
 195              	.LVL9:
 196              	.LBB34:
 197              	.LBB35:
 166:src/../h/riscv.hpp **** }
 198              		.loc 2 166 5 is_stmt 1
 166:src/../h/riscv.hpp **** }
 199              		.loc 2 166 65 is_stmt 0
 200              	#APP
 201              	# 166 "src/../h/riscv.hpp" 1
 202              		csrw sepc, a5
 203              	# 0 "" 2
 204              	.LVL10:
GAS LISTING /tmp/ccs6pYwa.s 			page 11


 205              	#NO_APP
 206              	.LBE35:
 207              	.LBE34:
 208              	.LBE23:
 209              	.LBE38:
 210              		.loc 1 112 1
 211 00b8 6FF05FF9 		j	.L3
 212              	.LVL11:
 213              	.L10:
 214              	.LBB39:
 215              	.LBB37:
 216              	.LBB36:
 217              	.LBB31:
  39:src/riscv.cpp ****                 //thread_create
 218              		.loc 1 39 13 is_stmt 1
  46:src/riscv.cpp ****                 Body body;
 219              		.loc 1 46 17
  47:src/riscv.cpp ****                 void* arg;
 220              		.loc 1 47 17
  48:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a1" : "=r" (tcb));
 221              		.loc 1 48 17
  49:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a2" : "=r" (body));
 222              		.loc 1 49 17
  49:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a2" : "=r" (body));
 223              		.loc 1 49 60 is_stmt 0
 224              	#APP
 225              	# 49 "src/riscv.cpp" 1
 226              		mv s1, a1
 227              	# 0 "" 2
 228              	.LVL12:
  50:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a3" : "=r" (arg));
 229              		.loc 1 50 17 is_stmt 1
  50:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a3" : "=r" (arg));
 230              		.loc 1 50 61 is_stmt 0
 231              	# 50 "src/riscv.cpp" 1
 232              		mv a0, a2
 233              	# 0 "" 2
 234              	.LVL13:
  51:src/riscv.cpp ****                 *tcb = TCB::createThread(body, arg);
 235              		.loc 1 51 17 is_stmt 1
  51:src/riscv.cpp ****                 *tcb = TCB::createThread(body, arg);
 236              		.loc 1 51 60 is_stmt 0
 237              	# 51 "src/riscv.cpp" 1
 238              		mv a1, a3
 239              	# 0 "" 2
 240              	.LVL14:
  52:src/riscv.cpp ****                 break;
 241              		.loc 1 52 17 is_stmt 1
  52:src/riscv.cpp ****                 break;
 242              		.loc 1 52 41 is_stmt 0
 243              	#NO_APP
 244 00c8 97000000 		call	_ZN3TCB12createThreadEPFvPvES0_@plt
 244      E7800000 
 245              	.LVL15:
  52:src/riscv.cpp ****                 break;
 246              		.loc 1 52 22
 247 00d0 23B0A400 		sd	a0,0(s1)
GAS LISTING /tmp/ccs6pYwa.s 			page 12


  53:src/riscv.cpp **** 
 248              		.loc 1 53 17 is_stmt 1
 249 00d4 6FF05FFD 		j	.L7
 250              	.LVL16:
 251              	.L5:
  61:src/riscv.cpp ****                 //Poziva se thread dispatch
 252              		.loc 1 61 13
  63:src/riscv.cpp ****                 break;
 253              		.loc 1 63 17
  63:src/riscv.cpp ****                 break;
 254              		.loc 1 63 30 is_stmt 0
 255 00d8 97000000 		call	_ZN3TCB8dispatchEv@plt
 255      E7800000 
 256              	.LVL17:
  64:src/riscv.cpp **** 
 257              		.loc 1 64 17 is_stmt 1
 258 00e0 6FF09FFC 		j	.L7
 259              	.LVL18:
 260              	.L6:
  66:src/riscv.cpp ****                 thread_t handle;
 261              		.loc 1 66 13
  67:src/riscv.cpp ****                 __asm__ volatile ("mv %0, a1" : "=r" (handle));
 262              		.loc 1 67 17
  68:src/riscv.cpp ****                 TCB::join(handle);
 263              		.loc 1 68 17
  68:src/riscv.cpp ****                 TCB::join(handle);
 264              		.loc 1 68 63 is_stmt 0
 265              	#APP
 266              	# 68 "src/riscv.cpp" 1
 267              		mv a0, a1
 268              	# 0 "" 2
 269              	.LVL19:
  69:src/riscv.cpp ****                 break;
 270              		.loc 1 69 17 is_stmt 1
  69:src/riscv.cpp ****                 break;
 271              		.loc 1 69 26 is_stmt 0
 272              	#NO_APP
 273 00e8 97000000 		call	_ZN3TCB4joinEPS_@plt
 273      E7800000 
 274              	.LVL20:
  70:src/riscv.cpp **** 
 275              		.loc 1 70 17 is_stmt 1
 276 00f0 6FF09FFB 		j	.L7
 277              	.LBE31:
 278              	.LBE36:
 279              	.LBE37:
 280              	.LBE39:
 281              		.cfi_endproc
 282              	.LFE53:
 284              		.align	2
 285              		.globl	_ZN5Riscv22handleConsoleInterruptEv
 287              	_ZN5Riscv22handleConsoleInterruptEv:
 288              	.LFB54:
 113:src/riscv.cpp **** 
 114:src/riscv.cpp **** void Riscv::handleConsoleInterrupt() {
 289              		.loc 1 114 38
 290              		.cfi_startproc
GAS LISTING /tmp/ccs6pYwa.s 			page 13


 291 00f4 130101FF 		addi	sp,sp,-16
 292              		.cfi_def_cfa_offset 16
 293 00f8 23341100 		sd	ra,8(sp)
 294 00fc 23308100 		sd	s0,0(sp)
 295              		.cfi_offset 1, -8
 296              		.cfi_offset 8, -16
 297 0100 13040101 		addi	s0,sp,16
 298              		.cfi_def_cfa 8, 0
 115:src/riscv.cpp ****     console_handler();
 299              		.loc 1 115 5
 300              		.loc 1 115 20 is_stmt 0
 301 0104 97000000 		call	console_handler@plt
 301      E7800000 
 302              	.LVL21:
 116:src/riscv.cpp **** }
 303              		.loc 1 116 1
 304 010c 83308100 		ld	ra,8(sp)
 305              		.cfi_restore 1
 306 0110 03340100 		ld	s0,0(sp)
 307              		.cfi_restore 8
 308              		.cfi_def_cfa 2, 16
 309 0114 13010101 		addi	sp,sp,16
 310              		.cfi_def_cfa_offset 0
 311 0118 67800000 		jr	ra
 312              		.cfi_endproc
 313              	.LFE54:
 315              		.align	2
 316              		.globl	_ZN5Riscv20handleTimerInterruptEv
 318              	_ZN5Riscv20handleTimerInterruptEv:
 319              	.LFB55:
 117:src/riscv.cpp **** 
 118:src/riscv.cpp **** void Riscv::handleTimerInterrupt() {
 320              		.loc 1 118 36 is_stmt 1
 321              		.cfi_startproc
 322 011c 130101FF 		addi	sp,sp,-16
 323              		.cfi_def_cfa_offset 16
 324 0120 23348100 		sd	s0,8(sp)
 325              		.cfi_offset 8, -8
 326 0124 13040101 		addi	s0,sp,16
 327              		.cfi_def_cfa 8, 0
 119:src/riscv.cpp ****     mc_sip(SIP_SSIP); // MORA DA SE OBRISE PENDING BIT - ZATO NIJE RADILO!
 328              		.loc 1 119 5
 329              	.LVL22:
 330              	.LBB40:
 331              	.LBB41:
 200:src/../h/riscv.hpp **** }
 332              		.loc 2 200 5
 200:src/../h/riscv.hpp **** }
 333              		.loc 2 200 64 is_stmt 0
 334 0128 93072000 		li	a5,2
 335              	#APP
 336              	# 200 "src/../h/riscv.hpp" 1
 337              		csrc sip, a5
 338              	# 0 "" 2
 339              	.LVL23:
 340              	#NO_APP
 341              	.LBE41:
GAS LISTING /tmp/ccs6pYwa.s 			page 14


 342              	.LBE40:
 120:src/riscv.cpp ****     /*uint64 volatile sepc = r_sepc();
 121:src/riscv.cpp ****     uint64 volatile sstatus = r_sstatus();
 122:src/riscv.cpp ****     TCB::dispatch();
 123:src/riscv.cpp ****     w_sstatus(sstatus);
 124:src/riscv.cpp ****     w_sepc(sepc);*/
 125:src/riscv.cpp **** }...
 343              		.loc 1 125 1
 344 0130 03348100 		ld	s0,8(sp)
 345              		.cfi_restore 8
 346              		.cfi_def_cfa 2, 16
 347 0134 13010101 		addi	sp,sp,16
 348              		.cfi_def_cfa_offset 0
 349 0138 67800000 		jr	ra
 350              		.cfi_endproc
 351              	.LFE55:
 353              	.Letext0:
 354              		.file 3 "src/../h/../lib/hw.h"
 355              		.file 4 "src/../h/tcb.hpp"
 356              		.file 5 "src/../h/syscall_c.hpp"
 357              		.file 6 "src/../lib/console.h"
GAS LISTING /tmp/ccs6pYwa.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 riscv.cpp
     /tmp/ccs6pYwa.s:9      .text:0000000000000000 _ZN5Riscv10popSppSpieEv
     /tmp/ccs6pYwa.s:13     .text:0000000000000000 .L0 
     /tmp/ccs6pYwa.s:14     .text:0000000000000000 .L0 
     /tmp/ccs6pYwa.s:15     .text:0000000000000004 .L0 
     /tmp/ccs6pYwa.s:17     .text:0000000000000008 .L0 
     /tmp/ccs6pYwa.s:19     .text:000000000000000c .L0 
     /tmp/ccs6pYwa.s:21     .text:000000000000000c .L0 
       src/riscv.cpp:13     .text:000000000000000c .L0 
     /tmp/ccs6pYwa.s:27     .text:0000000000000010 .L0 
       src/riscv.cpp:14     .text:0000000000000010 .L0 
     /tmp/ccs6pYwa.s:33     .text:0000000000000014 .L0 
     /tmp/ccs6pYwa.s:34     .text:0000000000000018 .L0 
     /tmp/ccs6pYwa.s:35     .text:0000000000000018 .L0 
     /tmp/ccs6pYwa.s:37     .text:000000000000001c .L0 
     /tmp/ccs6pYwa.s:39     .text:0000000000000020 .L0 
     /tmp/ccs6pYwa.s:45     .text:0000000000000020 _ZN5Riscv20handleSupervisorTrapEv
     /tmp/ccs6pYwa.s:48     .text:0000000000000020 .L0 
     /tmp/ccs6pYwa.s:49     .text:0000000000000020 .L0 
     /tmp/ccs6pYwa.s:50     .text:0000000000000024 .L0 
     /tmp/ccs6pYwa.s:54     .text:0000000000000030 .L0 
     /tmp/ccs6pYwa.s:55     .text:0000000000000030 .L0 
     /tmp/ccs6pYwa.s:56     .text:0000000000000030 .L0 
     /tmp/ccs6pYwa.s:58     .text:0000000000000034 .L0 
     /tmp/ccs6pYwa.s:63     .text:0000000000000034 .L0 
     /tmp/ccs6pYwa.s:64     .text:0000000000000034 .L0 
     /tmp/ccs6pYwa.s:65     .text:0000000000000034 .L0 
  src/../h/riscv.hpp:148    .text:0000000000000034 .L0 
     /tmp/ccs6pYwa.s:73     .text:000000000000003c .L0 
     /tmp/ccs6pYwa.s:74     .text:000000000000003c .L0 
     /tmp/ccs6pYwa.s:80     .text:0000000000000040 .L0 
     /tmp/ccs6pYwa.s:81     .text:0000000000000040 .L0 
     /tmp/ccs6pYwa.s:84     .text:0000000000000044 .L0 
     /tmp/ccs6pYwa.s:90     .text:000000000000004c .L0 
     /tmp/ccs6pYwa.s:91     .text:0000000000000050 .L0 
     /tmp/ccs6pYwa.s:92     .text:0000000000000050 .L0 
     /tmp/ccs6pYwa.s:94     .text:0000000000000054 .L0 
     /tmp/ccs6pYwa.s:95     .text:0000000000000054 .L0 
     /tmp/ccs6pYwa.s:97     .text:0000000000000058 .L0 
     /tmp/ccs6pYwa.s:99     .text:000000000000005c .L0 
     /tmp/ccs6pYwa.s:103    .text:0000000000000060 .L0 
     /tmp/ccs6pYwa.s:109    .text:0000000000000060 .L0 
     /tmp/ccs6pYwa.s:110    .text:0000000000000060 .L0 
     /tmp/ccs6pYwa.s:111    .text:0000000000000060 .L0 
  src/../h/riscv.hpp:160    .text:0000000000000060 .L0 
     /tmp/ccs6pYwa.s:120    .text:0000000000000068 .L0 
     /tmp/ccs6pYwa.s:121    .text:0000000000000068 .L0 
     /tmp/ccs6pYwa.s:125    .text:000000000000006c .L0 
     /tmp/ccs6pYwa.s:127    .text:0000000000000070 .L0 
     /tmp/ccs6pYwa.s:131    .text:0000000000000074 .L0 
     /tmp/ccs6pYwa.s:132    .text:0000000000000074 .L0 
     /tmp/ccs6pYwa.s:133    .text:0000000000000074 .L0 
  src/../h/riscv.hpp:228    .text:0000000000000074 .L0 
     /tmp/ccs6pYwa.s:141    .text:000000000000007c .L0 
     /tmp/ccs6pYwa.s:142    .text:000000000000007c .L0 
     /tmp/ccs6pYwa.s:146    .text:0000000000000080 .L0 
GAS LISTING /tmp/ccs6pYwa.s 			page 16


     /tmp/ccs6pYwa.s:150    .text:0000000000000084 .L0 
     /tmp/ccs6pYwa.s:151    .text:0000000000000084 .L0 
     /tmp/ccs6pYwa.s:152    .text:0000000000000084 .L0 
  src/../h/riscv.hpp:241    .text:0000000000000084 .L0 
     /tmp/ccs6pYwa.s:160    .text:000000000000008c .L0 
     /tmp/ccs6pYwa.s:161    .text:000000000000008c .L0 
     /tmp/ccs6pYwa.s:167    .text:0000000000000090 .L0 
     /tmp/ccs6pYwa.s:177    .text:00000000000000a8 .L0 
     /tmp/ccs6pYwa.s:178    .text:00000000000000a8 .L0 
     /tmp/ccs6pYwa.s:183    .text:00000000000000ac .L0 
  src/../h/riscv.hpp:234    .text:00000000000000ac .L0 
     /tmp/ccs6pYwa.s:193    .text:00000000000000b0 .L0 
     /tmp/ccs6pYwa.s:194    .text:00000000000000b0 .L0 
     /tmp/ccs6pYwa.s:199    .text:00000000000000b4 .L0 
  src/../h/riscv.hpp:166    .text:00000000000000b4 .L0 
     /tmp/ccs6pYwa.s:211    .text:00000000000000b8 .L0 
     /tmp/ccs6pYwa.s:219    .text:00000000000000bc .L0 
     /tmp/ccs6pYwa.s:220    .text:00000000000000bc .L0 
     /tmp/ccs6pYwa.s:221    .text:00000000000000bc .L0 
     /tmp/ccs6pYwa.s:222    .text:00000000000000bc .L0 
     /tmp/ccs6pYwa.s:223    .text:00000000000000bc .L0 
       src/riscv.cpp:49     .text:00000000000000bc .L0 
     /tmp/ccs6pYwa.s:230    .text:00000000000000c0 .L0 
       src/riscv.cpp:50     .text:00000000000000c0 .L0 
     /tmp/ccs6pYwa.s:236    .text:00000000000000c4 .L0 
       src/riscv.cpp:51     .text:00000000000000c4 .L0 
     /tmp/ccs6pYwa.s:242    .text:00000000000000c8 .L0 
     /tmp/ccs6pYwa.s:244    .text:00000000000000c8 .L0 
     /tmp/ccs6pYwa.s:247    .text:00000000000000d0 .L0 
     /tmp/ccs6pYwa.s:249    .text:00000000000000d4 .L0 
     /tmp/ccs6pYwa.s:253    .text:00000000000000d8 .L0 
     /tmp/ccs6pYwa.s:254    .text:00000000000000d8 .L0 
     /tmp/ccs6pYwa.s:255    .text:00000000000000d8 .L0 
     /tmp/ccs6pYwa.s:258    .text:00000000000000e0 .L0 
     /tmp/ccs6pYwa.s:262    .text:00000000000000e4 .L0 
     /tmp/ccs6pYwa.s:263    .text:00000000000000e4 .L0 
     /tmp/ccs6pYwa.s:264    .text:00000000000000e4 .L0 
       src/riscv.cpp:68     .text:00000000000000e4 .L0 
     /tmp/ccs6pYwa.s:271    .text:00000000000000e8 .L0 
     /tmp/ccs6pYwa.s:273    .text:00000000000000e8 .L0 
     /tmp/ccs6pYwa.s:276    .text:00000000000000f0 .L0 
     /tmp/ccs6pYwa.s:281    .text:00000000000000f4 .L0 
     /tmp/ccs6pYwa.s:287    .text:00000000000000f4 _ZN5Riscv22handleConsoleInterruptEv
     /tmp/ccs6pYwa.s:290    .text:00000000000000f4 .L0 
     /tmp/ccs6pYwa.s:291    .text:00000000000000f4 .L0 
     /tmp/ccs6pYwa.s:292    .text:00000000000000f8 .L0 
     /tmp/ccs6pYwa.s:295    .text:0000000000000100 .L0 
     /tmp/ccs6pYwa.s:296    .text:0000000000000100 .L0 
     /tmp/ccs6pYwa.s:298    .text:0000000000000104 .L0 
     /tmp/ccs6pYwa.s:300    .text:0000000000000104 .L0 
     /tmp/ccs6pYwa.s:301    .text:0000000000000104 .L0 
     /tmp/ccs6pYwa.s:304    .text:000000000000010c .L0 
     /tmp/ccs6pYwa.s:305    .text:0000000000000110 .L0 
     /tmp/ccs6pYwa.s:307    .text:0000000000000114 .L0 
     /tmp/ccs6pYwa.s:308    .text:0000000000000114 .L0 
     /tmp/ccs6pYwa.s:310    .text:0000000000000118 .L0 
     /tmp/ccs6pYwa.s:312    .text:000000000000011c .L0 
GAS LISTING /tmp/ccs6pYwa.s 			page 17


     /tmp/ccs6pYwa.s:318    .text:000000000000011c _ZN5Riscv20handleTimerInterruptEv
     /tmp/ccs6pYwa.s:321    .text:000000000000011c .L0 
     /tmp/ccs6pYwa.s:322    .text:000000000000011c .L0 
     /tmp/ccs6pYwa.s:323    .text:0000000000000120 .L0 
     /tmp/ccs6pYwa.s:325    .text:0000000000000124 .L0 
     /tmp/ccs6pYwa.s:327    .text:0000000000000128 .L0 
     /tmp/ccs6pYwa.s:332    .text:0000000000000128 .L0 
     /tmp/ccs6pYwa.s:333    .text:0000000000000128 .L0 
     /tmp/ccs6pYwa.s:334    .text:0000000000000128 .L0 
     /tmp/ccs6pYwa.s:344    .text:0000000000000130 .L0 
     /tmp/ccs6pYwa.s:345    .text:0000000000000134 .L0 
     /tmp/ccs6pYwa.s:346    .text:0000000000000134 .L0 
     /tmp/ccs6pYwa.s:348    .text:0000000000000138 .L0 
     /tmp/ccs6pYwa.s:350    .text:000000000000013c .L0 
     /tmp/ccs6pYwa.s:358    .text:000000000000013c .L0 
     /tmp/ccs6pYwa.s:102    .text:0000000000000060 .L9
     /tmp/ccs6pYwa.s:251    .text:00000000000000d8 .L5
     /tmp/ccs6pYwa.s:260    .text:00000000000000e4 .L6
     /tmp/ccs6pYwa.s:213    .text:00000000000000bc .L10
     /tmp/ccs6pYwa.s:87     .text:000000000000004c .L3
     /tmp/ccs6pYwa.s:174    .text:00000000000000a8 .L7
     /tmp/ccs6pYwa.s:1414   .debug_abbrev:0000000000000000 .Ldebug_abbrev0
     /tmp/ccs6pYwa.s:2589   .debug_str:00000000000006d9 .LASF126
     /tmp/ccs6pYwa.s:2605   .debug_str:00000000000007ab .LASF127
     /tmp/ccs6pYwa.s:2403   .debug_str:00000000000001b7 .LASF128
     /tmp/ccs6pYwa.s:5      .text:0000000000000000 .Ltext0
     /tmp/ccs6pYwa.s:353    .text:000000000000013c .Letext0
     /tmp/ccs6pYwa.s:2345   .debug_line:0000000000000000 .Ldebug_line0
     /tmp/ccs6pYwa.s:2419   .debug_str:0000000000000255 .LASF0
     /tmp/ccs6pYwa.s:2447   .debug_str:00000000000002f4 .LASF1
     /tmp/ccs6pYwa.s:2513   .debug_str:00000000000004f3 .LASF2
     /tmp/ccs6pYwa.s:2521   .debug_str:0000000000000535 .LASF4
     /tmp/ccs6pYwa.s:2425   .debug_str:000000000000027c .LASF3
     /tmp/ccs6pYwa.s:2355   .debug_str:000000000000004a .LASF5
     /tmp/ccs6pYwa.s:2493   .debug_str:000000000000045d .LASF6
     /tmp/ccs6pYwa.s:2443   .debug_str:00000000000002ce .LASF7
     /tmp/ccs6pYwa.s:2401   .debug_str:00000000000001a7 .LASF8
     /tmp/ccs6pYwa.s:2411   .debug_str:0000000000000212 .LASF9
     /tmp/ccs6pYwa.s:2369   .debug_str:000000000000009c .LASF10
     /tmp/ccs6pYwa.s:2397   .debug_str:0000000000000187 .LASF11
     /tmp/ccs6pYwa.s:2375   .debug_str:00000000000000d1 .LASF12
     /tmp/ccs6pYwa.s:2367   .debug_str:000000000000008c .LASF13
     /tmp/ccs6pYwa.s:2541   .debug_str:00000000000005aa .LASF14
     /tmp/ccs6pYwa.s:2391   .debug_str:0000000000000146 .LASF15
     /tmp/ccs6pYwa.s:2533   .debug_str:0000000000000575 .LASF16
     /tmp/ccs6pYwa.s:2583   .debug_str:00000000000006c1 .LASF96
     /tmp/ccs6pYwa.s:2503   .debug_str:00000000000004b3 .LASF129
     /tmp/ccs6pYwa.s:2451   .debug_str:000000000000030d .LASF17
     /tmp/ccs6pYwa.s:2395   .debug_str:000000000000017e .LASF18
     /tmp/ccs6pYwa.s:2607   .debug_str:00000000000007b9 .LASF19
     /tmp/ccs6pYwa.s:2413   .debug_str:0000000000000220 .LASF52
     /tmp/ccs6pYwa.s:2417   .debug_str:000000000000023d .LASF54
     /tmp/ccs6pYwa.s:2573   .debug_str:0000000000000684 .LASF20
     /tmp/ccs6pYwa.s:2567   .debug_str:0000000000000647 .LASF22
     /tmp/ccs6pYwa.s:2509   .debug_str:00000000000004df .LASF24
     /tmp/ccs6pYwa.s:2479   .debug_str:00000000000003f9 .LASF26
     /tmp/ccs6pYwa.s:2497   .debug_str:0000000000000485 .LASF21
GAS LISTING /tmp/ccs6pYwa.s 			page 18


     /tmp/ccs6pYwa.s:2499   .debug_str:000000000000048c .LASF23
     /tmp/ccs6pYwa.s:2471   .debug_str:00000000000003b7 .LASF25
     /tmp/ccs6pYwa.s:2445   .debug_str:00000000000002e1 .LASF27
     /tmp/ccs6pYwa.s:2603   .debug_str:00000000000007a3 .LASF28
     /tmp/ccs6pYwa.s:2559   .debug_str:0000000000000615 .LASF29
     /tmp/ccs6pYwa.s:2469   .debug_str:00000000000003af .LASF30
     /tmp/ccs6pYwa.s:2477   .debug_str:00000000000003e5 .LASF31
     /tmp/ccs6pYwa.s:2455   .debug_str:000000000000032f .LASF32
     /tmp/ccs6pYwa.s:2501   .debug_str:000000000000049f .LASF33
     /tmp/ccs6pYwa.s:2617   .debug_str:00000000000007fd .LASF34
     /tmp/ccs6pYwa.s:2423   .debug_str:0000000000000268 .LASF35
     /tmp/ccs6pYwa.s:2537   .debug_str:0000000000000592 .LASF36
     /tmp/ccs6pYwa.s:2525   .debug_str:0000000000000541 .LASF37
     /tmp/ccs6pYwa.s:2527   .debug_str:0000000000000554 .LASF38
     /tmp/ccs6pYwa.s:2371   .debug_str:00000000000000ab .LASF39
     /tmp/ccs6pYwa.s:2389   .debug_str:0000000000000140 .LASF40
     /tmp/ccs6pYwa.s:2415   .debug_str:000000000000022b .LASF41
     /tmp/ccs6pYwa.s:2421   .debug_str:0000000000000262 .LASF42
     /tmp/ccs6pYwa.s:2383   .debug_str:0000000000000114 .LASF43
     /tmp/ccs6pYwa.s:2357   .debug_str:0000000000000051 .LASF44
     /tmp/ccs6pYwa.s:2517   .debug_str:0000000000000512 .LASF45
     /tmp/ccs6pYwa.s:2511   .debug_str:00000000000004e8 .LASF46
     /tmp/ccs6pYwa.s:2615   .debug_str:00000000000007e5 .LASF47
     /tmp/ccs6pYwa.s:2585   .debug_str:00000000000006c7 .LASF48
     /tmp/ccs6pYwa.s:2611   .debug_str:00000000000007c9 .LASF49
     /tmp/ccs6pYwa.s:2581   .debug_str:00000000000006b7 .LASF50
     /tmp/ccs6pYwa.s:2461   .debug_str:000000000000034d .LASF51
     /tmp/ccs6pYwa.s:2597   .debug_str:000000000000078a .LASF53
     /tmp/ccs6pYwa.s:2409   .debug_str:00000000000001f6 .LASF55
     /tmp/ccs6pYwa.s:2529   .debug_str:000000000000055b .LASF56
     /tmp/ccs6pYwa.s:2487   .debug_str:0000000000000429 .LASF57
     /tmp/ccs6pYwa.s:2475   .debug_str:00000000000003e0 .LASF58
     /tmp/ccs6pYwa.s:2485   .debug_str:0000000000000418 .LASF59
     /tmp/ccs6pYwa.s:2429   .debug_str:000000000000029f .LASF60
     /tmp/ccs6pYwa.s:2539   .debug_str:0000000000000599 .LASF61
     /tmp/ccs6pYwa.s:2591   .debug_str:000000000000077b .LASF62
     /tmp/ccs6pYwa.s:2427   .debug_str:000000000000028e .LASF63
     /tmp/ccs6pYwa.s:2431   .debug_str:00000000000002a4 .LASF64
     /tmp/ccs6pYwa.s:2491   .debug_str:000000000000044c .LASF65
     /tmp/ccs6pYwa.s:2593   .debug_str:0000000000000780 .LASF66
     /tmp/ccs6pYwa.s:2365   .debug_str:000000000000007b .LASF67
     /tmp/ccs6pYwa.s:2433   .debug_str:00000000000002a9 .LASF68
     /tmp/ccs6pYwa.s:2441   .debug_str:00000000000002bd .LASF69
     /tmp/ccs6pYwa.s:2595   .debug_str:0000000000000785 .LASF70
     /tmp/ccs6pYwa.s:2619   .debug_str:0000000000000805 .LASF71
     /tmp/ccs6pYwa.s:2435   .debug_str:00000000000002ae .LASF72
     /tmp/ccs6pYwa.s:2387   .debug_str:000000000000012f .LASF73
     /tmp/ccs6pYwa.s:2481   .debug_str:000000000000040e .LASF74
     /tmp/ccs6pYwa.s:2561   .debug_str:0000000000000629 .LASF75
     /tmp/ccs6pYwa.s:2437   .debug_str:00000000000002b3 .LASF76
     /tmp/ccs6pYwa.s:2347   .debug_str:0000000000000000 .LASF77
     /tmp/ccs6pYwa.s:2599   .debug_str:0000000000000799 .LASF78
     /tmp/ccs6pYwa.s:2505   .debug_str:00000000000004be .LASF79
     /tmp/ccs6pYwa.s:2439   .debug_str:00000000000002b8 .LASF80
     /tmp/ccs6pYwa.s:2569   .debug_str:000000000000065c .LASF81
     /tmp/ccs6pYwa.s:2601   .debug_str:000000000000079e .LASF82
     /tmp/ccs6pYwa.s:2459   .debug_str:000000000000033c .LASF83
GAS LISTING /tmp/ccs6pYwa.s 			page 19


     /tmp/ccs6pYwa.s:2361   .debug_str:0000000000000068 .LASF84
     /tmp/ccs6pYwa.s:2515   .debug_str:0000000000000501 .LASF85
     /tmp/ccs6pYwa.s:2489   .debug_str:0000000000000447 .LASF86
     /tmp/ccs6pYwa.s:2407   .debug_str:00000000000001e5 .LASF87
     /tmp/ccs6pYwa.s:2563   .debug_str:000000000000063a .LASF88
     /tmp/ccs6pYwa.s:2463   .debug_str:0000000000000363 .LASF89
     /tmp/ccs6pYwa.s:2495   .debug_str:0000000000000470 .LASF90
     /tmp/ccs6pYwa.s:2393   .debug_str:000000000000015c .LASF92
     /tmp/ccs6pYwa.s:2543   .debug_str:00000000000005b6 .LASF91
     /tmp/ccs6pYwa.s:2473   .debug_str:00000000000003be .LASF93
     /tmp/ccs6pYwa.s:2379   .debug_str:00000000000000ef .LASF94
     /tmp/ccs6pYwa.s:2465   .debug_str:0000000000000374 .LASF95
     /tmp/ccs6pYwa.s:2545   .debug_str:00000000000005cb .LASF130
     /tmp/ccs6pYwa.s:2523   .debug_str:000000000000053c .LASF97
     /tmp/ccs6pYwa.s:2353   .debug_str:000000000000003e .LASF99
     /tmp/ccs6pYwa.s:2547   .debug_str:00000000000005d3 .LASF131
     /tmp/ccs6pYwa.s:2467   .debug_str:0000000000000398 .LASF132
     /tmp/ccs6pYwa.s:2359   .debug_str:000000000000005c .LASF98
     /tmp/ccs6pYwa.s:2571   .debug_str:000000000000066d .LASF100
     /tmp/ccs6pYwa.s:2557   .debug_str:0000000000000608 .LASF101
     /tmp/ccs6pYwa.s:2577   .debug_str:0000000000000692 .LASF102
     /tmp/ccs6pYwa.s:2483   .debug_str:0000000000000413 .LASF119
     /tmp/ccs6pYwa.s:2449   .debug_str:0000000000000307 .LASF103
     /tmp/ccs6pYwa.s:2507   .debug_str:00000000000004cf .LASF104
     /tmp/ccs6pYwa.s:2551   .debug_str:00000000000005e3 .LASF133
     /tmp/ccs6pYwa.s:2555   .debug_str:00000000000005f4 .LASF134
     /tmp/ccs6pYwa.s:2349   .debug_str:0000000000000011 .LASF105
     /tmp/ccs6pYwa.s:2613   .debug_str:00000000000007df .LASF106
     /tmp/ccs6pYwa.s:2565   .debug_str:000000000000063f .LASF107
     /tmp/ccs6pYwa.s:2531   .debug_str:000000000000056c .LASF108
     /tmp/ccs6pYwa.s:2363   .debug_str:000000000000006d .LASF109
     /tmp/ccs6pYwa.s:2453   .debug_str:0000000000000316 .LASF110
     /tmp/ccs6pYwa.s:2377   .debug_str:00000000000000e1 .LASF113
     /tmp/ccs6pYwa.s:2351   .debug_str:0000000000000016 .LASF115
     /tmp/ccs6pYwa.s:2385   .debug_str:0000000000000126 .LASF111
     /tmp/ccs6pYwa.s:2373   .debug_str:00000000000000be .LASF112
     /tmp/ccs6pYwa.s:2549   .debug_str:00000000000005de .LASF114
     /tmp/ccs6pYwa.s:2399   .debug_str:0000000000000196 .LASF116
     /tmp/ccs6pYwa.s:2519   .debug_str:000000000000052a .LASF135
     /tmp/ccs6pYwa.s:2457   .debug_str:0000000000000337 .LASF117
     /tmp/ccs6pYwa.s:2553   .debug_str:00000000000005eb .LASF118
     /tmp/ccs6pYwa.s:319    .text:000000000000011c .LFB55
     /tmp/ccs6pYwa.s:351    .text:000000000000013c .LFE55
     /tmp/ccs6pYwa.s:330    .text:0000000000000128 .LBB40
     /tmp/ccs6pYwa.s:342    .text:0000000000000130 .LBE40
     /tmp/ccs6pYwa.s:2236   .debug_loc:0000000000000000 .LLST8
     /tmp/ccs6pYwa.s:288    .text:00000000000000f4 .LFB54
     /tmp/ccs6pYwa.s:313    .text:000000000000011c .LFE54
     /tmp/ccs6pYwa.s:302    .text:000000000000010c .LVL21
     /tmp/ccs6pYwa.s:46     .text:0000000000000020 .LFB53
     /tmp/ccs6pYwa.s:282    .text:00000000000000f4 .LFE53
     /tmp/ccs6pYwa.s:2535   .debug_str:000000000000058b .LASF120
     /tmp/ccs6pYwa.s:2244   .debug_loc:0000000000000024 .LLST0
     /tmp/ccs6pYwa.s:2337   .debug_ranges:0000000000000000 .Ldebug_ranges0
     /tmp/ccs6pYwa.s:2575   .debug_str:000000000000068d .LASF121
     /tmp/ccs6pYwa.s:2587   .debug_str:00000000000006d1 .LASF122
     /tmp/ccs6pYwa.s:2381   .debug_str:0000000000000106 .LASF123
GAS LISTING /tmp/ccs6pYwa.s 			page 20


     /tmp/ccs6pYwa.s:2263   .debug_loc:0000000000000071 .LLST1
     /tmp/ccs6pYwa.s:217    .text:00000000000000bc .LBB31
     /tmp/ccs6pYwa.s:277    .text:00000000000000f4 .LBE31
     /tmp/ccs6pYwa.s:2282   .debug_loc:00000000000000cd .LLST2
     /tmp/ccs6pYwa.s:2289   .debug_loc:00000000000000f0 .LLST3
     /tmp/ccs6pYwa.s:2296   .debug_loc:0000000000000113 .LLST4
     /tmp/ccs6pYwa.s:2609   .debug_str:00000000000007c2 .LASF124
     /tmp/ccs6pYwa.s:2303   .debug_loc:0000000000000136 .LLST5
     /tmp/ccs6pYwa.s:245    .text:00000000000000d0 .LVL15
     /tmp/ccs6pYwa.s:256    .text:00000000000000e0 .LVL17
     /tmp/ccs6pYwa.s:274    .text:00000000000000f0 .LVL20
     /tmp/ccs6pYwa.s:107    .text:0000000000000060 .LBB24
     /tmp/ccs6pYwa.s:123    .text:000000000000006c .LBE24
     /tmp/ccs6pYwa.s:129    .text:0000000000000074 .LBB26
     /tmp/ccs6pYwa.s:144    .text:0000000000000080 .LBE26
     /tmp/ccs6pYwa.s:148    .text:0000000000000084 .LBB28
     /tmp/ccs6pYwa.s:164    .text:0000000000000090 .LBE28
     /tmp/ccs6pYwa.s:180    .text:00000000000000ac .LBB32
     /tmp/ccs6pYwa.s:191    .text:00000000000000b0 .LBE32
     /tmp/ccs6pYwa.s:2310   .debug_loc:0000000000000159 .LLST6
     /tmp/ccs6pYwa.s:196    .text:00000000000000b4 .LBB34
     /tmp/ccs6pYwa.s:207    .text:00000000000000b8 .LBE34
     /tmp/ccs6pYwa.s:2317   .debug_loc:000000000000017c .LLST7
     /tmp/ccs6pYwa.s:60     .text:0000000000000034 .LBB20
     /tmp/ccs6pYwa.s:77     .text:0000000000000040 .LBE20
     /tmp/ccs6pYwa.s:10     .text:0000000000000000 .LFB52
     /tmp/ccs6pYwa.s:40     .text:0000000000000020 .LFE52
     /tmp/ccs6pYwa.s:2579   .debug_str:00000000000006b2 .LASF125
     /tmp/ccs6pYwa.s:2405   .debug_str:00000000000001d5 .LASF136
     /tmp/ccs6pYwa.s:329    .text:0000000000000128 .LVL22
     /tmp/ccs6pYwa.s:339    .text:0000000000000130 .LVL23
     /tmp/ccs6pYwa.s:75     .text:0000000000000040 .LVL0
     /tmp/ccs6pYwa.s:82     .text:0000000000000044 .LVL1
     /tmp/ccs6pYwa.s:86     .text:000000000000004c .LVL2
     /tmp/ccs6pYwa.s:101    .text:0000000000000060 .LVL3
     /tmp/ccs6pYwa.s:116    .text:0000000000000064 .LVL4
     /tmp/ccs6pYwa.s:162    .text:0000000000000090 .LVL5
     /tmp/ccs6pYwa.s:173    .text:00000000000000a8 .LVL6
     /tmp/ccs6pYwa.s:212    .text:00000000000000bc .LVL11
     /tmp/ccs6pYwa.s:250    .text:00000000000000d8 .LVL16
     /tmp/ccs6pYwa.s:259    .text:00000000000000e4 .LVL18
     /tmp/ccs6pYwa.s:228    .text:00000000000000c0 .LVL12
     /tmp/ccs6pYwa.s:234    .text:00000000000000c4 .LVL13
     /tmp/ccs6pYwa.s:240    .text:00000000000000c8 .LVL14
     /tmp/ccs6pYwa.s:269    .text:00000000000000e8 .LVL19
     /tmp/ccs6pYwa.s:179    .text:00000000000000ac .LVL7
     /tmp/ccs6pYwa.s:188    .text:00000000000000b0 .LVL8
     /tmp/ccs6pYwa.s:195    .text:00000000000000b4 .LVL9
     /tmp/ccs6pYwa.s:204    .text:00000000000000b8 .LVL10
     /tmp/ccs6pYwa.s:359    .debug_info:0000000000000000 .Ldebug_info0
     /tmp/ccs6pYwa.s:105    .text:0000000000000060 .LBB23
     /tmp/ccs6pYwa.s:208    .text:00000000000000b8 .LBE23
     /tmp/ccs6pYwa.s:215    .text:00000000000000bc .LBB37
     /tmp/ccs6pYwa.s:279    .text:00000000000000f4 .LBE37

UNDEFINED SYMBOLS
_ZN3TCB12createThreadEPFvPvES0_
GAS LISTING /tmp/ccs6pYwa.s 			page 21


_ZN3TCB8dispatchEv
_ZN3TCB4joinEPS_
console_handler
